# WEB-002: Design System and Component Library

## Metadata
- **Status:** completed
- **Type:** feature
- **Epic:** web-foundation
- **Priority:** high
- **Size:** medium
- **Created:** 2025-09-26
- **Groomed:** 2025-09-26
- **Completed:** 2025-09-26
- **Branch:** feat/WEB-002-design-system-component-library (merged)
- **PR:** #19 (merged)
- **Merged By:** jwynia

## Description
Create a comprehensive design system and component library that provides consistent, accessible UI components for the Pliers platform. This establishes the visual and interaction foundation for all user interfaces.

## Acceptance Criteria
- [ ] ✅ EXISTING: Tailwind CSS configured with HSL custom properties for theming
- [ ] ✅ EXISTING: Radix UI components installed and ready to use
- [ ] ✅ EXISTING: Basic typography system in place (Inter font family)
- [ ] ✅ EXISTING: Color system with semantic tokens via CSS custom properties
- [ ] ✅ EXISTING: Dark/light theme switching with CSS custom properties
- [ ] ✅ EXISTING: Lucide React icons installed and one component using them
- [ ] ✅ EXISTING: Basic cn() utility function for class merging
- [ ] Create comprehensive base component library:
  - [ ] Button component with variants (primary, secondary, destructive, outline, ghost)
  - [ ] Input component with validation states
  - [ ] Card component with header, content, footer
  - [ ] Modal/Dialog component using Radix Dialog
  - [ ] Dropdown Menu using Radix DropdownMenu
  - [ ] Select component using Radix Select
  - [ ] Switch component using Radix Switch
  - [ ] Toast notification system using Radix Toast
  - [ ] Tooltip component using Radix Tooltip
- [ ] Create layout components:
  - [ ] Container component with responsive max-widths
  - [ ] Grid and Flex utility components
  - [ ] Stack component for consistent spacing
- [ ] Document spacing system with consistent scales (based on 8px grid)
- [ ] Add comprehensive component tests with accessibility testing
- [ ] Export all components from organized index files
- [ ] Ensure WCAG 2.1 AA compliance for all components
- [ ] Add proper focus management and keyboard navigation

## Technical Notes
- Use Tailwind CSS for utility-first styling approach
- Radix UI provides unstyled, accessible component primitives
- CSS custom properties for theme variables
- Storybook for component development and documentation
- Design tokens follow 8px grid system
- Color palette supports both light and dark themes

## Dependencies
- ✅ WEB-001: React SPA Foundation with Vite (COMPLETED - builds pass, tests pass)

## Design Token Structure
```typescript
const designTokens = {
  colors: {
    primary: {
      50: '#eff6ff',
      500: '#3b82f6',
      900: '#1e3a8a'
    },
    semantic: {
      success: '#10b981',
      warning: '#f59e0b',
      error: '#ef4444',
      info: '#3b82f6'
    }
  },
  spacing: {
    xs: '0.25rem',   // 4px
    sm: '0.5rem',    // 8px
    md: '1rem',      // 16px
    lg: '1.5rem',    // 24px
    xl: '2rem'       // 32px
  },
  typography: {
    fontFamily: {
      sans: ['Inter', 'system-ui', 'sans-serif'],
      mono: ['JetBrains Mono', 'monospace']
    },
    fontSize: {
      xs: '0.75rem',
      sm: '0.875rem',
      base: '1rem',
      lg: '1.125rem',
      xl: '1.25rem'
    }
  }
};
```

## Component Architecture
```
src/components/
├── ui/                    # Base design system components
│   ├── Button.tsx
│   ├── Input.tsx
│   ├── Card.tsx
│   ├── Modal.tsx
│   ├── Dropdown.tsx
│   └── index.ts
├── layout/               # Layout components
│   ├── AppLayout.tsx
│   ├── Header.tsx
│   ├── Sidebar.tsx
│   └── Footer.tsx
└── icons/               # Icon components
    ├── IconButton.tsx
    └── index.ts
```

## Accessibility Requirements
- All interactive elements have focus indicators
- Color contrast ratios meet WCAG AA standards (4.5:1 for normal text)
- Components support keyboard navigation
- Screen reader compatible with proper ARIA attributes
- Reduced motion preference support
- High contrast mode compatibility

## Theme System Implementation
```css
:root {
  /* Light theme */
  --color-background: #ffffff;
  --color-foreground: #0f172a;
  --color-primary: #3b82f6;
  --color-border: #e2e8f0;
}

[data-theme="dark"] {
  /* Dark theme */
  --color-background: #0f172a;
  --color-foreground: #f8fafc;
  --color-primary: #60a5fa;
  --color-border: #334155;
}
```

## Responsive Breakpoints
```typescript
const breakpoints = {
  sm: '640px',   // Mobile landscape
  md: '768px',   // Tablet
  lg: '1024px',  // Desktop
  xl: '1280px',  // Large desktop
  '2xl': '1536px' // Extra large
};
```

## Component Standards
- Use TypeScript for all components with proper prop types
- Forward refs for all interactive components
- Compound components for complex UI patterns
- Polymorphic components where appropriate
- Consistent prop naming conventions

## Storybook Configuration
- Story for each component with all variants
- Controls for interactive props
- Accessibility addon for testing
- Design tokens documentation
- Usage guidelines and examples

## Testing Strategy
- **Unit Tests**: Each component has comprehensive Vitest tests covering:
  - Rendering with all prop variants
  - Accessibility (aria attributes, keyboard navigation)
  - User interactions (clicks, focus, form submissions)
  - Theme switching behavior
- **Test Pattern**: Use React Testing Library with user-event for realistic interactions
- **Accessibility**: @testing-library/jest-dom for accessibility assertions
- **File Structure**: Component tests alongside components (Button.test.tsx next to Button.tsx)
- **Coverage Target**: 90%+ coverage for all component logic
- **Test Naming**: Follow "should [expected behavior] when [condition]" pattern

## Performance Considerations
- Tree-shakable component exports
- Minimal bundle size impact
- Efficient CSS generation with Tailwind
- Optimized icon loading with Lucide React
- Lazy loading for heavy components

## Security Considerations
- Sanitize any user-provided content in components
- Secure handling of file uploads in form components
- XSS prevention in dynamic content rendering
- CSRF protection in form submissions

## Documentation Requirements
- Component API documentation
- Usage examples and patterns
- Accessibility guidelines
- Theme customization guide
- Migration guide for existing components

## References
- Tailwind CSS: https://tailwindcss.com/
- Radix UI: https://www.radix-ui.com/
- Lucide React: https://lucide.dev/
- WCAG 2.1: https://www.w3.org/WAI/WCAG21/quickref/
- Storybook: https://storybook.js.org/

## Implementation Approach

### Phase 1: Core UI Components (First)
1. **Button Component** - Start with most common component
   - Create `src/components/ui/Button.tsx` with variants using CVA (class-variance-authority)
   - Add comprehensive tests and accessibility features
   - Use as template for other components

2. **Input Component** - Build form foundation
   - Text input with validation states
   - Error message integration
   - Proper ARIA labeling

3. **Card Component** - Layout building block
   - Header, content, footer composition
   - Flexible content areas

### Phase 2: Interactive Components
1. **Modal/Dialog** using Radix Dialog primitive
2. **Dropdown Menu** using Radix DropdownMenu
3. **Select** using Radix Select
4. **Switch** using Radix Switch

### Phase 3: Advanced Components
1. **Toast System** using Radix Toast
2. **Tooltip** using Radix Tooltip
3. **Layout Components** (Container, Stack, Grid helpers)

### Key Patterns to Follow:
- Use `forwardRef` for all interactive components
- Export everything from `src/components/ui/index.ts`
- Follow existing `cn()` utility pattern for class merging
- Use TypeScript interfaces for prop definitions
- Include comprehensive JSDoc comments

## Branch Naming
`feat/WEB-002-design-system-component-library`
# WEB-006-2: Widget Framework and Wrapper

## Metadata
- **Status:** ready
- **Type:** feature
- **Epic:** web-dashboard
- **Priority:** medium
- **Size:** medium
- **Estimated Effort:** 3-4 days
- **Created:** 2025-09-30
- **Parent Task:** WEB-006 (archived - oversized)
- **Branch:** feat/WEB-006-2-widget-framework-wrapper

## Description
Create the widget wrapper component that provides the standard container, header, actions, and loading/error states for all widget types. This includes the widget configuration modal and the plugin architecture for different widget types.

## Acceptance Criteria
- [ ] Implement WidgetWrapper component with card styling
- [ ] Add widget header with title and action buttons
- [ ] Create widget configuration modal
- [ ] Implement loading and error states
- [ ] Build widget type registry system

## Technical Notes
- Use Card component from design system (WEB-002)
- Widget actions: configure, refresh, delete
- Configuration modal should use tabs (basic, data, appearance, filters)
- Widget type registry allows pluggable widget implementations

## Implementation Approach
```typescript
interface Widget {
  id: string;
  type: WidgetType;
  title: string;
  position: GridPosition;
  config: WidgetConfig;
  dataSource: DataSourceConfig;
  refreshInterval?: number;
}

const WidgetWrapper = ({
  widget,
  isEditMode,
  onUpdate,
  onDelete,
  onConfigure
}: {
  widget: Widget;
  isEditMode: boolean;
  onUpdate: (updates: Partial<Widget>) => void;
  onDelete: () => void;
  onConfigure: () => void;
}) => {
  const [isLoading, setIsLoading] = useState(false);
  const [data, setData] = useState(null);
  const [error, setError] = useState<string | null>(null);

  return (
    <Card className="widget-card">
      <CardHeader className="widget-header">
        <CardTitle>{widget.title}</CardTitle>
        {isEditMode && (
          <div className="widget-actions">
            <Button size="sm" variant="ghost" onClick={onConfigure}>
              <Settings size={16} />
            </Button>
            <Button size="sm" variant="ghost" onClick={() => refreshWidget(widget.id)}>
              <RefreshCw size={16} />
            </Button>
            <Button size="sm" variant="ghost" onClick={onDelete}>
              <Trash2 size={16} />
            </Button>
          </div>
        )}
      </CardHeader>

      <CardContent className="widget-content">
        {error ? (
          <WidgetError error={error} onRetry={() => refreshWidget(widget.id)} />
        ) : (
          <WidgetRenderer widget={widget} data={data} isLoading={isLoading} />
        )}
      </CardContent>
    </Card>
  );
};
```

## Dependencies
- WEB-006-1: Dashboard Layout Foundation (grid integration)
- WEB-002: Design System (Card, Button components)

## Follows After
- WEB-006-1: Dashboard Layout Foundation

## Enables
- WEB-006-3: Chart Widget Implementation
- WEB-006-4: Metric and Progress Widgets
- WEB-006-5: Table and List Widgets

## Testing Strategy
- Unit tests for WidgetWrapper component
- Test widget actions (configure, refresh, delete)
- Test loading and error states
- Verify configuration modal opens

## Success Metrics
- Widget wrapper displays correctly
- Action buttons function properly in edit mode
- Loading/error states render appropriately
- Configuration modal integration works

## Branch Naming
`feat/WEB-006-2-widget-framework-wrapper`
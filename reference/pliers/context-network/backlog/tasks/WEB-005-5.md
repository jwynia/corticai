# WEB-005-5: Conditional Logic Editor

## Metadata
- **Status:** ready
- **Type:** feature
- **Epic:** web-forms
- **Priority:** medium
- **Size:** medium
- **Estimated Effort:** 3-5 days
- **Created:** 2025-09-30
- **Parent Task:** WEB-005 (archived - oversized)
- **Branch:** feat/WEB-005-5-conditional-logic-editor

## Description
Implement a visual editor for conditional field logic, allowing users to define when fields should be shown or hidden based on the values of other fields. This provides a user-friendly interface for creating field dependencies without writing code.

## Acceptance Criteria
- [ ] Create conditional rule builder interface
- [ ] Implement field selection dropdown for conditions
- [ ] Add operator selection (equals, not equals, contains, etc.)
- [ ] Support value input for condition comparison
- [ ] Allow multiple conditions per field (AND/OR logic)

## Technical Notes
- Add as a tab or section in the Property Panel
- Only show fields that appear before the current field in the form
- Support multiple condition operators based on field type
- Store conditions in field.conditional property

## Implementation Approach
```typescript
interface ConditionalRule {
  field: string;
  operator: 'equals' | 'not_equals' | 'contains' | 'greater_than' | 'less_than';
  value: any;
  logic?: 'and' | 'or';
}

const ConditionalLogicEditor = ({ field }: { field: FormField }) => {
  const [conditions, setConditions] = useState<ConditionalRule[]>(
    field.conditional?.show || []
  );
  const { schema } = useFormDesigner();
  const availableFields = getFieldsBefore(schema, field.id);

  const addCondition = () => {
    setConditions([...conditions, createEmptyCondition()]);
  };

  const updateCondition = (index: number, updates: Partial<ConditionalRule>) => {
    const newConditions = [...conditions];
    newConditions[index] = { ...newConditions[index], ...updates };
    setConditions(newConditions);
  };

  return (
    <div className="conditional-editor">
      <Label>Show this field when:</Label>

      {conditions.map((condition, index) => (
        <ConditionRow
          key={index}
          condition={condition}
          availableFields={availableFields}
          onChange={(updates) => updateCondition(index, updates)}
          onRemove={() => removeCondition(index)}
        />
      ))}

      <Button onClick={addCondition}>Add Condition</Button>
    </div>
  );
};
```

## Dependencies
- WEB-005-4: Property Panel and Field Configuration (integration point)
- WEB-005-3: Form Canvas and Field Management (field list)
- WEB-004: Dynamic Form Renderer Engine (conditional evaluation)

## Follows After
- WEB-005-4: Property Panel and Field Configuration

## Enables
- Enhanced form logic in WEB-005-6 (preview mode will show conditions working)

## Testing Strategy
- Unit tests for condition builder logic
- Test field filtering (only show prior fields)
- Test operator selection based on field type
- Integration test with form preview showing conditions work

## Success Metrics
- Users can add/remove conditional rules
- Field dependencies display correctly
- Conditions save to schema properly
- Preview mode respects conditional logic
- Complex conditions (multiple rules) work correctly

## Branch Naming
`feat/WEB-005-5-conditional-logic-editor`